# =============================================================================
# Common Usage (prefix: C-t)
# =============================================================================
#
# Window:
#   C-t c       Create new window
#   C-t n / p   Next / Previous window
#   C-t &       Kill window
#
# Pane:
#   C-t %       Split vertically
#   C-t "       Split horizontally
#   C-t o       Switch pane
#   C-t x       Kill pane
#   C-t z       Toggle pane zoom
#
# Copy mode (emacs):
#   C-t [       Enter copy mode
#   C-Space     Start selection
#   M-w         Copy to clipboard (Option+w)
#   C-t ]       Paste from tmux buffer
#   C-g / q     Exit copy mode
#
# Session:
#   C-t d       Detach
#   C-t s       List sessions
#
# =============================================================================

## configuration ##
set -g history-limit 50000

## change prefix ##
unbind-key C-b

## key bind ##
set-option -g prefix C-t
bind-key C-t send-prefix
bind-key C-n next-window
bind-key C-p previous-window
bind-key C-c new-window
bind-key C-o last-pane

## window ##
# Renumber windows when one is closed
set -g renumber-windows on

## terminal ##
# Enable 256 colors and TrueColor (iTerm2 + macOS)
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Reduce ESC key delay
set -s escape-time 10

## status bar ##
set -g status-fg colour253
set -g status-bg colour237

# Active window style
set-window-option -g window-status-current-style fg="colour255",bg="colour240"

set -g status-position bottom
set -g status-left '#[fg=colour32, bold]#S '
set -g status-right ''

## pane ##
# Pane border (show only with multiple panes)
set -g pane-border-status off
set -g pane-border-format "#{pane_index} #{pane_current_path} #{pane_title}"
set-hook -g after-split-window 'if -F "#{>:#{window_panes},1}" "set pane-border-status top" ""'
set-hook -g after-kill-pane 'if -F "#{<=:#{window_panes},1}" "set pane-border-status off" ""'
set-hook -g after-select-window 'if -F "#{>:#{window_panes},1}" "set pane-border-status top" "set pane-border-status off"'

## copy mode ##
set-window-option -g mode-keys emacs

# macOS clipboard integration (emacs mode)
set -g set-clipboard on
bind -T copy-mode M-w send-keys -X copy-pipe-and-cancel "pbcopy"
